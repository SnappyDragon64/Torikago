[gd_scene load_steps=10 format=3 uid="uid://cdcov0ancsa1y"]

[ext_resource type="Script" path="res://game/entity/player/player.gd" id="1_u23no"]
[ext_resource type="Script" path="res://game/entity/state_machine/state_machine.gd" id="1_vcpkk"]
[ext_resource type="Script" path="res://game/entity/player/run_state.gd" id="2_k78y2"]
[ext_resource type="Script" path="res://game/entity/player/idle_state.gd" id="3_y24cg"]
[ext_resource type="Script" path="res://game/entity/player/jump_state.gd" id="4_qi5n4"]
[ext_resource type="Script" path="res://game/entity/player/fall_state.gd" id="5_ilmt4"]
[ext_resource type="PackedScene" uid="uid://caioeub6pwumj" path="res://game/entity/player/player_model.tscn" id="7_k4am0"]
[ext_resource type="Script" path="res://game/entity/player/dash_state.gd" id="8_0do5e"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_tfoky"]
radius = 18.0
height = 136.0

[node name="Player" type="CharacterBody2D"]
script = ExtResource("1_u23no")

[node name="PlayerModel" parent="." instance=ExtResource("7_k4am0")]
scale = Vector2(1.2, 1.2)

[node name="Hitbox" type="CollisionShape2D" parent="."]
position = Vector2(0, -68)
shape = SubResource("CapsuleShape2D_tfoky")

[node name="StateMachine" type="Node" parent="."]
script = ExtResource("1_vcpkk")
initial_state = NodePath("IdleState")

[node name="IdleState" type="Node" parent="StateMachine"]
script = ExtResource("3_y24cg")
state_id = "idle"

[node name="RunState" type="Node" parent="StateMachine"]
script = ExtResource("2_k78y2")
state_id = "run"

[node name="JumpState" type="Node" parent="StateMachine"]
script = ExtResource("4_qi5n4")
state_id = "jump"

[node name="FallState" type="Node" parent="StateMachine"]
script = ExtResource("5_ilmt4")
state_id = "fall"

[node name="JumpQueueTimer" type="Timer" parent="StateMachine/FallState"]
wait_time = 0.25

[node name="CoyoteTimer" type="Timer" parent="StateMachine/FallState"]
wait_time = 0.25

[node name="DashState" type="Node" parent="StateMachine"]
script = ExtResource("8_0do5e")
state_id = "dash"

[node name="DashTimer" type="Timer" parent="StateMachine/DashState"]
process_callback = 0
wait_time = 0.2
one_shot = true

[connection signal="timeout" from="StateMachine/FallState/JumpQueueTimer" to="StateMachine/FallState" method="_jump_queue_timeout"]
[connection signal="timeout" from="StateMachine/FallState/CoyoteTimer" to="StateMachine/FallState" method="_coyote_timeout"]
[connection signal="timeout" from="StateMachine/DashState/DashTimer" to="StateMachine/DashState" method="_dash_timeout"]
